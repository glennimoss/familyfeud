<template name="controller">
  <div id="testbed" style="font-size: 20px; width: 0px;"></div>
  <div id="controller">
    {{#if question_set}}
      {{#if eq (state "screen") "fast-money"}}
        {{>fast_money_controller}}
      {{else}}
        {{>stat_summary}}
        <button id="next-q" type="button">Next Question</button>
        {{#if phaseIn "pregame" "reveal"}}
          <button id="next-q" type="button">Next Question</button>
        {{/if}}
        {{#if eq (state "screen") "board"}}
          {{#if eq (state "phase") "faceoff"}}
          <button id="cntl-team1" type="button">Team 1 to Play</button>
          <button id="cntl-team2" type="button">Team 2 to Play</button>
          {{/if}}
          <button id="strike" type="button">
            {{#if eq (state "phase") "faceoff"}}
              Faceoff
            {{/if}}
            {{#if eq (state "phase") "play"}}
              {{nth}}
            {{/if}}
            {{#if eq (state "phase") "steal"}}
              Steal
            {{/if}}
            Strike!
          </button>
          <hr>
          {{question.question}}
          <table id="answers">
            <tbody>
              {{#each ans in question.answers}}
              <tr>
                <td>{{plus @index 1}}:</td>
                <td>{{upper ans.answer}}</td>
                <td class="show-button">
                  <button type="button" disabled={{eq ans.flipside "side2"}}>Show</button>
                </td>
              </tr>
              {{/each}}
            </tbody>
          </table>
        {{/if}}
      {{/if}}
    {{else}}
      <div class="choose-set">
        Choose a question set:
        {{#each all_question_sets}}
          <button type="button">{{this}}</button>
        {{/each}}
      </div>
    {{/if}}
  </div>
</template>

<template name="stat_summary">
  <h1>Scores:</h1>
  <table id="scores">
    <tbody>
      <tr>
        <td>Team 1: {{score_team1}}</td>
        <td>Team 2: {{score_team2}}</td>
      </tr>
    </tbody>
  </table>
  {{#if eq (state "phase") "faceoff"}}
  Faceoff!
  {{/if}}
  {{#if eq (state "phase") "play"}}
    {{#if eq (state "control") "team1"}}
    Team 1 is in control.
    {{/if}}
    {{#if eq (state "control") "team2"}}
    Team 2 is in control.
    {{/if}}
  {{/if}}
  {{#if eq (state "phase") "steal"}}
    {{#if eq (state "control") "team1"}}
    Team 1 has a chance to steal.
    {{/if}}
    {{#if eq (state "control") "team2"}}
    Team 2 has a chance to steal.
    {{/if}}
  {{/if}}
  {{#if eq (state "phase") "reveal"}}
    {{#if eq (state "control") "team1"}}
    Team 1 wins!
    {{/if}}
    {{#if eq (state "control") "team2"}}
    Team 2 wins!
    {{/if}}
    <br/>Reveal the remaining answers.
  {{/if}}
</template>

<template name="host">
  {{#if eq (state "screen") "fast-money"}}
    {{>fm_host}}
  {{else}}
    {{>stat_summary}}
    <hr>
    {{question.question}}
  {{/if}}
</template>
